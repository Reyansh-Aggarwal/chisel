<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Smooth Semicircle Scroll Loop</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  html, body {
    margin: 0; padding: 0; height: 100%;
    overflow: hidden;
    background-color: #f3f4f6; /* Tailwind gray-100 */
  }
  #scrollContainer {
    position: fixed;
    right: 0;
    top: 0;
    width: 12dvh;
    height: 100vh;
    user-select: none;
    overflow: hidden;
    outline: none;
  }
  .circle {

    width: 12dvh;
    aspect-ratio: 1 / 1;
    background-color: #3b82f6; /* Tailwind blue-500 */
    border-radius: 9999px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 8px rgb(59 130 246 / 0.5);
    user-select: none;
    pointer-events: none;
    will-change: transform;
    transition: box-shadow 0.3s;
  }
  .circle:hover {
    box-shadow: 0 8px 16px rgb(59 130 246 / 0.8);
    z-index: 2000 !important;
  }
  .circle img {
    max-width: 50%;
    max-height: 50%;
    pointer-events: none;
    user-select: none;
  }
</style>
</head>
<body>

<div id="scrollContainer" tabindex="0" aria-label="Semicircle scroll container" role="region" aria-live="polite">
  <div style="position: relative; width: 100%; height: 100%;">
    <div class="circle" id="bag" aria-label="Bag icon" role="img"><img src="https://upload.wikimedia.org/wikipedia/commons/4/43/Simpleicons_Interface_bag-purse.svg" alt="Bag icon" /></div>
    <div class="circle" id="case" aria-label="Case icon" role="img"><img src="https://upload.wikimedia.org/wikipedia/commons/9/9c/Simpleicons_Interface_briefcase.svg" alt="Case icon" /></div>
    <div class="circle" id="bns-card" aria-label="BNS Card icon" role="img"><img src="https://upload.wikimedia.org/wikipedia/commons/e/ee/Simpleicons_Interface_credit-card.svg" alt="BNS Card icon" /></div>
    <div class="circle" id="cloth" aria-label="Cloth icon" role="img"><img src="https://upload.wikimedia.org/wikipedia/commons/8/88/Simpleicons_Interface_t-shirt.svg" alt="Cloth icon" /></div>
    <div class="circle" id="spray" aria-label="Spray icon" role="img"><img src="https://upload.wikimedia.org/wikipedia/commons/b/bb/Simpleicons_Interface_spray.svg" alt="Spray icon" /></div>
  </div>
</div>

<script>
(() => {
  const container = document.getElementById('scrollContainer');
  const circles = Array.from(container.querySelectorAll('.circle'));
  const count = circles.length;

  let vh = window.innerHeight;
  let circleDiameter = vh * 0.12;
  let radius = vh / 2 - circleDiameter / 2 - 10; // radius with padding 10px

  // Semicircle vertical height (arc height)
  const arcHeight = 2 * radius;

  // Precalculate fixed semicircle positions (x,y) - centers relative to container's top right corner
  // The circles arranged evenly on the semicircle between angles 0 to PI
  const angles = Array(count)
    .fill(0)
    .map((_, i) => (Math.PI * i) / (count - 1));

  // Calculate base coordinates for each circle (center positions)
  const basePositions = angles.map(angle => {
    return {
      x: -Math.cos(angle) * radius,
      y: Math.sin(angle) * radius
    };
  });

  // Scroll vertical offset, affecting vertical position of all circles, in pixels (initial 0)
  let scrollOffset = 0;

  // Utility: clamp scroll offset between 0 and arcHeight with wrap-around modulo
  function wrapOffset(offset) {
    return ((offset % arcHeight) + arcHeight) % arcHeight;
  }

  // Update circle positions based on scrollOffset
  function updatePositions() {
    circles.forEach((circle, i) => {
      const base = basePositions[i];

      // Vertical position plus scrollOffset wrapped to arcHeight
      let yPos = wrapOffset(base.y + scrollOffset);

      // Vertical center container adjustment to center semicircle inside container
      const centeredY = yPos + (vh / 2 - radius);

      // Adjust for circle top-left positioning
      const finalX = base.x - circleDiameter / 2;
      const finalY = centeredY - circleDiameter / 2;

      circle.style.transform = \`translate(\${finalX}px, \${finalY}px)\`;

      // Z-index: circles near bottom have lower z-index, near top higher z-index
      // We invert so smallest y (top) is front
      circle.style.zIndex = Math.round(1000 - yPos);
    });
  }

  // Wheel event to update scroll offset and reposition circles
  container.addEventListener('wheel', (e) => {
    e.preventDefault();
    // Sensitivity factor for smoothness
    const sensitivity = 0.7;
    scrollOffset = wrapOffset(scrollOffset + e.deltaY * sensitivity);
    updatePositions();
  }, { passive: false });

  // Initial position setup
  updatePositions();

  // On window resize recalc sizes and update position
  window.addEventListener('resize', () => {
    vh = window.innerHeight;
    circleDiameter = vh * 0.12;
    radius = vh / 2 - circleDiameter / 2 - 10;

    // Update base positions
    for (let i = 0; i < count; i++) {
      basePositions[i] = {
        x: -Math.cos(angles[i]) * radius,
        y: Math.sin(angles[i]) * radius
      };
    }
    updatePositions();
  });
})();
</script>

</body>
</html>

